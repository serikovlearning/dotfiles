##### CORE SETTINGS #####
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*:Tc"
set -sg escape-time 0
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g focus-events on
set -g history-limit 10000

# List of TPM plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'


# Save and restore sessions automatically
set -g @resurrect-capture-pane-contents 'on'

# Disable automatic renaming of windows to preserve manual names

setw -g automatic-rename off
setw -g automatic-rename-format ""

# Reload config
bind r source-file ~/.config/tmux/tmux.conf \; display-message "tmux reloaded"

##### STATUS BAR (BOTTOM, CENTERED) #####
set -g status on
set -g status-position bottom
set -g status-justify centre
set -g status-interval 15   # refresh every 15s (minimal CPU impact)
set -g status-left ""
set -g status-right ""       # empty, no info
set -g status-left-length 0
set -g status-right-length 0
set -g status-style "bg=#{@ctp_bg},fg=#{@ctp_muted}"

##### MELLOW CATPPUCCIN COLORS #####
set -g @ctp_bg "default"         # terminal background
set -g @ctp_surface "colour237"  # subtle surface
set -g @ctp_overlay "colour239"  # pane border inactive
set -g @ctp_text "colour250"     # main text
set -g @ctp_subtext "colour245"  # inactive tab text
set -g @ctp_muted "colour244"    # status bar text
set -g @ctp_accent "colour108"   # soft accent (green-blue)

set -g window-status-style "fg=#{@ctp_subtext},bg=#{@ctp_bg}"
set -g window-status-current-style "fg=#{@ctp_text},bg=#{@ctp_bg}"

##### TAB FORMAT (MINIMAL) #####
# Just show the window name
set -g window-status-format "  #{window_name}  "
set -g window-status-current-format "#[fg=#{@ctp_accent}]▎#[fg=#{@ctp_text}] #{window_name}  "

##### PANES #####
# Thin borders
set -g pane-border-style "fg=#{@ctp_overlay}"
set -g pane-active-border-style "fg=#{@ctp_accent}"

# Optional soft Unicode corners
# Uncomment if your terminal supports it
# set -g pane-border-format "╭─╮"
# set -g pane-active-border-format "╰─╯"

##### SPLITS #####
unbind '"'
unbind %
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Zoom active pane
bind z resize-pane -Z

# Quick pane navigation (Alt+arrows)
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Resize panes faster (HJKL)
bind -r H resize-pane -L 5
bind -r L resize-pane -R 5
bind -r K resize-pane -U 5
bind -r J resize-pane -D 5

##### COPY MODE (VI) #####
setw -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection
# Copy to tmux buffer AND system clipboard
bind -T copy-mode-vi y send -X copy-selection-and-cancel \; run-shell "tmux save-buffer - | xclip -selection clipboard"

##### MESSAGE / MODE UI #####
set -g message-style "fg=#{@ctp_text},bg=#{@ctp_surface}"
set -g mode-style "fg=#{@ctp_accent},bg=#{@ctp_surface}"

##### NEOVIM FRIENDLY #####
set -g focus-events on

##### WINDOW & SESSION MANAGEMENT #####
# Choose window / session easily
bind w choose-window
bind s choose-session

# Initialize TMUX plugin manager (keep this line at the very bottom)
run '~/.tmux/plugins/tpm/tpm'

